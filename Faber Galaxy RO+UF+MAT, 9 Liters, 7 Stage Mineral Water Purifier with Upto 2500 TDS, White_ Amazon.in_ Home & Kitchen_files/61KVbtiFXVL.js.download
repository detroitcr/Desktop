(function(E){var A=window.AmazonUIPageJS||window.P,ta=A._namespace||A.attributeErrors,g=ta?ta("DetailPageImageBlockAssets",""):A;g.guardFatal?g.guardFatal(E)(g,window):g.execute(function(){E(g,window)})})(function(E,A,ta){E.register("postMetric",function(){return{postCountMetric:function(g){if("undefined"!==typeof g){var n=A.ue;if(n){var p=n.count(g)||0;n.count(g,p+1)}}},postTimeMetric:function(g,n){if("undefined"!==typeof g&&"undefined"!==typeof n){var p=A.ue;p&&p.count(g,n)}}}});"use strict";E.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});E.register("postEarlyMetric",function(){return null});"use strict";E.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(g,n,p,a){g=g.extend(!0,{},p,a);var e=new n(g);E.register("ImageBlockAPI",function(){return e.api});return e});"use strict";E.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(g,n,p){function a(a){a&&(E.load.js(a),A.performance&&performance.now&&A.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",
A.parseInt(performance.now())))}function e(a){a&&E.load.css(a)}var C=p.airyConfig;void 0===C?E.when("ImageBlockATF").execute(function(g){C=g.airyConfig;a(C.jsUrl);e(C.cssUrl);A.performance&&performance.now&&A.ue&&ue.count&&ue.count("WeblabAllocationErrorCount",(ue.count("WeblabAllocationErrorCount")||0)+1)}):(a(C.jsUrl),e(C.cssUrl))});"use strict";E.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(g,n,p,a,e,C){var w=
{};return function(g){var d=this;d.dispatch=function(a,d){var g=w[a];e.isDefined(g)&&n.each(g,function(a,e){e.call(A,d)})};d.register=function(a,d){e.isDefined(w[a])||(w[a]=[]);"function"===typeof d&&w[a].push(d)};d.model=new p(g,d);d.view=new a(g,d,d.model);d.api=new C(g,d,d.model);d.init=function(){d.model.init();d.view.init()};d.init()}});"use strict";E.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(g,n,p){function a(a,e,d,m,c){p.isDefined(a)&&(I.type=a);p.isDefined(e)&&
(I.index=e);p.isDefined(d)&&(I.thumbnailIndex=d);p.isDefined(m)&&(I.variant=m);p.isDefined(c)&&(I.color=c)}function e(e){a("image",0,0,"MAIN",e||d.landingAsinColor||d.defaultColor)}function C(e){e=e.data;F=g.copy(I);a(e.type,e.index,e.thumbnailIndex,e.variant,e.color)}function w(a){C(a);a=g.copy(a);a.data=g.copy(I);m.dispatch("updateView",a)}function q(){F=g.copy(I);e(I.color)}var d,m,I={},F={},G,H;return function(a,n){m=n;d=a;m.register("updateSelection",w);m.register("updateModel",C);m.register("resetModel",
q);this.init=function(){e()};this.getCurrentItem=function(){return g.copy(I)};this.getPreviousItem=function(){return g.copy(F)};this.setCurrentEvent=function(a){G=a};this.getCurrentEvent=function(){return G};this.setImmersiveViewModalInstance=function(a){H=a};this.getImmersiveViewModalInstance=function(){return H};this.updateTitle=function(a){d.title=a}}});"use strict";E.when("ImageBlockBTF","postMetric").execute(function(g,n){function p(a,g,n,p,d){function m(c){"click"===c.type&&p.postCountMetric("thumbClick");
"click"===c.type&&B.overrideAltImageClickAction?t.dispatch("thumbActionClick",c):t.dispatch("updateSelection",c)}function I(c){B.useClickZoom||t.dispatch("imageClick",c)}function F(c){B.useClickZoom||t.dispatch("imageHover",c)}function G(c){t.dispatch("button360Click",c)}function H(h){!n.isDefined(h)||"swatchClick"!==h.type&&"updatedData"!==h.type?(c.update(h),"swatchHover"!==h.type&&M.getPreviousItem().thumbnailIndex!==h.data.thumbnailIndex&&p.postCountMetric(h.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",
h.data)):c.render(h.data.color,!1,h.onload)}function x(c){t.dispatch("resize",c)}function J(c){n.selectThumbnail(c,h)}function O(c){var a=c.data,h;a&&"ingress"!==a.type&&"click"===c.type&&(h=c);return h}function N(c){var a=M.getCurrentItem(),h={type:"click"};h.$declarativeParent=c;h.data=a;return h}var c,B,t,M,h;return function(y,k,n){c=this;B=y;t=k;M=n;h=g("#imageBlock #altImages ul");var p=g("#imageBlock .canvas"),b=g("#main-image-container"),f;c.subViews=[];for(k=0;k<d.length;k++)c.subViews.push(new d[k](y,
n,c,t));c.render=function(a,k,e){var d=0;h.find(".item").remove();a=a||M.getCurrentItem().color;g.each(c.subViews,function(c,f){d=f.render(a,d,p,h,b,k,e)||d});var m=h.find(".a-button-selected").closest(".a-declarative");f=N(m)};c.init=function(){h=g("#imageBlock #altImages ul");var b=h.find(".a-button-selected").closest(".a-declarative"),f=b.data("action"),b=b.data(f)||{};b.color=B.landingAsinColor||B.defaultColor;t.dispatch("updateModel",{data:b});c.render(b.color,!0);B.isDebug&&A.console&&console.log(B);
t.register("updateView",H);t.register("selectThumbnail",J);"function"===typeof A.markFeatureInteractive&&A.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["click","hover"]},{name:"thumbnail",events:["click","hover"]}]});B.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],m);a.declarative("thumb-action",["click"],m);a.declarative("main-image-click",["click"],I);a.declarative("main-image-click",["mouseenter","mouseleave"],F);
a.declarative("button-360-click",["click"],G);a.on("resize",x)};c.update=function(b){g.each(c.subViews,function(c,a){a.update(b)});B.usePeekHover&&("mouseleave"===b.type?t.dispatch("updateSelection",f):"click"===b.type&&(f=O(b)||f))}}}var a=["A","jQuery","imageBlockUtils","postMetric"].concat(g.views);E.when.apply(E,a).register("ImageBlockView",function(){for(var a=arguments[0],g=arguments[1],n=arguments[2],q=arguments[3],d=[],m=4,I=arguments.length;m<I;m++)d.push(arguments[m]);return p(a,g,n,q,d)})});
"use strict";E.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(g,n,p,a,e,C,w){function q(c,b,a,f){if(!p.isjQueryObjDefined(c.find(".a-button-selected"))){var l=y.getCurrentItem();if(!f||"chromeless-video"!==l.type||!h.autoplayVideo){f=0;"image"===l.type&&(f=Math.max(I(l.color,l.variant),0));var d=b+f;d>=a&&(f=0,d=b);b=p.getImageHash(l.color,f,h);-1!==b&&(k.dispatch("updateModel",{data:{index:f,
thumbnailIndex:d,variant:b.variant,type:"image"}}),b=c.find(".item").get(d),p.selectGivenThumbnail(n(b),c))}}}function d(c,b,a){b=h.colorImages&&h.colorImages[b];var f=c;p.isDefined(b)&&(n.each(b,function(b,a){c<h.maxAlts&&(p.createThumbnail({type:"image",index:b,thumbnailIndex:c,variant:a.variant},a.thumb,L,"imageThumbnail"),c++)}),C.isEnabled&&w.logAltImgRequestPlacedOnThumbnails(n,C,y),q(L,f,c,a));return c}function m(c,b){if("image"===c.type){var a=n("#image-canvas-caption #canvasCaption"),f,l=
h.staticStrings,d=h.colorImages,k=c.color,e=c.index;b&&h.useIV?f=l.clickToExpand:d[k]&&d[k][e].hiRes&&h.useHoverZoom?(f=h.useHoverZoomIpad?l.touchToZoom:h.useClickZoom?l.clickToZoom:l.rollOverToZoom,h.hoverZoomIndicator&&(f="\x3cimg src\x3d'"+h.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+f)):h.useIV&&(f=l.clickToExpand);a.html(f)}}function I(c,b){return p.getIndexForVariant(c,b,h)}function F(c,a){var f="a-dynamic-image";if(!h.acEnabled){var l;n.each(c.main,function(c,b){p.isDefined(l)||(l=parseFloat(b[1]/
b[0])<=parseFloat(h.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});f+=l}var d=p.getMaxDimensionsOfMainImage(c.main,b,h),k=d[0],e=d[1],d=n("\x3cdiv\x3e\x3c/div\x3e"),k={"max-height":k,"max-width":e};d.addClass(f).css(k).attr({"data-old-hires":c.hiRes,"data-a-manual-replacement":"true",onload:a}).data("a-dynamic-image",c.main);return d}function G(c){var b=u.find(".swatchHoverExp");c=F(c);b.find(".imgTagWrapper").html(c);g.loadImageManually(c);return b}function H(c){var a=b.css("height");
null!==a&&c.find(".imgTagWrapper").css("height",a);c.addClass("selected");h.imgTagWrapperClasses&&c.find(".imgTagWrapper").addClass(h.imgTagWrapperClasses)}function x(c,b){if("image"===c.type||"unavailable"===c.type||"lazy-loaded"===c.type){var a=p.getImageHash(c.color,c.index,h);if(-1===a)return a={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},p.lazyLoadingRequired(c,y,h)?N(c,!1,b):(k.dispatch("updateModel",a),p.showUnavailable(c.color)),-1;var f=u.find(".item.itemNo"+c.thumbnailIndex);
if(!p.isjQueryObjDefined(f)){var f=c.thumbnailIndex,f=u.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+f+" maintain-height"),l=F(a,b);f.find(".placeHolder").replaceWith(l);u.find(".list").append(f);g.loadImageManually(l)}H(f);k.dispatch("loadMagnifier");m(c);h.useIV&&p.isDefined(a.hiRes)&&f.css("cursor","pointer");c.isUserGenerated&&(f=y.getPreviousItem(),l=c.variant,p.isDefined(l)&&f.thumbnailIndex!==c.thumbnailIndex&&(C.isEnabled&&w.logAltImgRequestServed(C),
e.postCountMetric("ImageThumbnailSelectedVariant:"+l),0===l.indexOf("IG")&&(e.postCountMetric("IGImageSelectedVariant:"+l),e.postCountMetric("IGImageSelectedEvent:"+c.interaction))));g.trigger("dp:image-block:update",a)}}function J(c){var b=Math.max(I(c.color,y.getCurrentItem().variant),0),b=p.getImageHash(c.color,b,h);if(-1===b)return p.lazyLoadingRequired(c,y,h)?p.lazyLoadOnHoverEnabled(h)&&(O(".3",!0),p.spinner(u,!0),g.delay(function(){y.getCurrentEvent().data===c&&N(c,!0)},500)):p.showUnavailable(c.color),
-1;var a=G(b);H(a);g.trigger("dp:image-block:update",b)}function O(c,b){b?u.css("opacity",c):n("#imageBlock").css("opacity",c)}function N(b,d,e){f=d;l=e;var m=b.color,g=h.colorToAsin[m];if(g&&g.asin){var t={};t.params={asin:g.asin,productGroupID:h.productGroupID,color:m};t.success=function(a){a?(p.ajaxState(g.asin,"success"),h.colorImages[m]=a.colorImage,p.isDefined(h.spin360ColorEnabled)&&(h.spin360ColorEnabled[m]=a.enable360),m===b.color&&(d&&f?b===y.getCurrentEvent().data&&(c(b),J(b)):(a={type:"updatedData",
data:y.getCurrentItem(),onload:e||l},k.dispatch("updateView",a))),E.register(p.rankedImagesReadyEvent(g.asin))):p.ajaxState(g.asin,"fail")};t.error=function(){p.ajaxState(g.asin,"fail")};t.indicator=p.spinner(u);p.ajaxState(g.asin,void 0)&&"fail"!==p.ajaxState(g.asin,void 0)||(O(".3",d),a.load("/gp/product/features/apparel-main-image/ranked-images.html",t),p.ajaxState(g.asin,"sent"));return h.colorImages&&h.colorImages[m]}}function c(c,b){p.lazyLoadingRequired(c,y,h)||(n("#imageBlock").css("opacity",
"1"),u.css("opacity","1"),p.spinner(u,!1),u.find("li").removeClass("selected"),n("#image-canvas-caption #canvasCaption").empty(),p.hideUnavailable(),b&&u.find(".list .item").remove())}function B(){var c=u.find(".item .imgTagWrapper"),a=p.getContainerHeight(b,h.holderRatio,h.holderMaxHeight);0<a&&(b.height(a),c.height(a));u.find("img.a-dynamic-image").each(function(){var c=n(this);c.data("a-manual-replacement")&&g.loadDynamicImage(this);var a=c.data("a-dynamic-image"),a=p.getMaxDimensionsOfMainImage(a,
b,h);c.css({"max-height":a[0]+"px","max-width":a[1]+"px"})})}function t(c){m(y.getCurrentItem(),"mouseenter"===c.type)}var M,h,y,k,L,u,b,f,l,r;return function(a,f,l,g){M=this;h=a;y=f;k=g;h.colorImages[h.landingAsinColor]=h.colorImages[h.defaultColor];M.render=function(a,f,l,e,g,m,t){u=l;L=e;b=g;r=d(f,a,m);m||(a=y.getCurrentItem(),p.lazyLoadingRequired(a,y,h)&&k.dispatch("updateModel",{data:{type:"lazy-loaded"}}));c(y.getCurrentItem(),!m);x(y.getCurrentItem(),t);return r};M.update=function(b){var a=
b.data;y.setCurrentEvent(b);"ingress"!==a.type&&c(b.data,!1);"swatchHover"===b.type?a.color===y.getCurrentItem().color?x(y.getCurrentItem()):b.captured||-1===J(a)||(b.captured=!0):"image"===a.type&&(a.interaction=b.type,a.isUserGenerated=!0,"mouseenter"===b.type&&e.postCountMetric("dpcc_imageThumbHovered_"+(a.thumbnailIndex+1)+"_"+r),x(a),h.usePeekHover&&"click"!==b.type||(p.selectGivenThumbnail(b.$declarativeParent,L),"click"===b.type&&e.postCountMetric("dpcc_imageThumbClicked_"+(a.thumbnailIndex+
1)+"_"+r)))};k.register("imageHover",t);k.register("resize",B)}});"use strict";E.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(g,n,p,a,e,C){function w(a){O?a.css("cursor","url('"+F.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function q(a){var c=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(p.isDefined(c))for(var c=c[1].split("_"),
d=0;d<c.length;d++){var e=c[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);p.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function d(d,c){function m(){var b;c.useClickZoom?(b=c.offsetInClickZoom,b=[Math.min(1,Math.max(0,x[0]-(G[0]+b))/(G[2]-2*b)),Math.min(1,Math.max(0,x[1]-(G[1]+b))/(G[3]-2*b))]):b=r&&r.updatePosition();if(b&&l&&l.detailSize){var a=[l.detailSize[0]-l.rect.width,l.detailSize[1]-l.rect.height];g.capabilities.rtl?l.detailImage.get(0).style.right=-(b[0]*a[0])+"px":l.detailImage.get(0).style.left=
-(b[0]*a[0])+"px";l.detailImage.get(0).style.top=-(b[1]*a[1])+"px"}}function t(c){return c.offsetParent().hasClass("a-dynamic-image-container")}function I(c){var b=V?c.originalEvent.touches[0]||c.originalEvent.changedTouches[0]:"";x=V?[b.pageX,b.pageY]:[c.pageX,c.pageY];if(g.capabilities.rtl){var a=n(A).width();x=V?[a-b.pageX,b.pageY]:[a-c.pageX,c.pageY]}}function h(f){V&&f.preventDefault();I(f);c.useClickZoom?f=[G[0],G[1],G[0]+G[2],G[1]+G[3]]:(f=r?r.offset:d.offsetParent().offset(),f=F.acEnabled?
[f.left,f.top,b.width()+f.left,b.height()+f.top]:[z[0]+f.left,z[1]+f.top,z[0]+z[2]+f.left,z[1]+z[3]+f.top]);x[0]<f[0]||x[1]<f[1]||x[0]>=f[2]||x[1]>=f[3]||F.acEnabled&&!t(d)?(c.fadeMagnifier?aa||(aa=!0,E=setTimeout(function(){y(!0)},500)):c.useClickZoom||y(),W&&(W=!1,clearTimeout(ea))):(W||(W=!0,ea=setTimeout(function(){a.postCountMetric("dppc_hoverZoomOpened");e.isEnabled&&C.logHoverZoomRequestServed(e)},1E3)),c.fadeMagnifier&&aa&&(aa=!1,clearTimeout(E)),m())}function y(c){c&&u.suppressMagnifier(!0);
if(Q&&(l&&l.hide(),r&&(r.destroy(),r=null),Q=!1,V?(d.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),n(document).trigger("disengaged.magnifier")):n(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),H(),c))d.one("click.magnifier touchstart.magnifier",function(c){k(c,!0)})}function k(f,e){e&&u.suppressMagnifier(!1);if(!Q&&!J&&(0===ga&&(a.postCountMetric("dppc_hoverTime",new Date-(A.ue&&A.ue.t0||0)),ga=1),ia[T]||(a.postCountMetric("dppc_hoverMain"),ia[T]=1),
z=[d.position().left,d.position().top,d.width(),d.height()],T&&(I(f),l?l.refit().show():l=new fa,c.useClickZoom||(r=r||new ha),G=l.getWindowSize(),m()),Q=!0,V?(d.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",h).bind("touchend.magnifier",y),n(document).trigger("engaged.magnifier")):(F.acEnabled?b.unbind("mousemove.magnifier"):d.unbind("mousemove.magnifier"),n(document).trigger("engaged.magnifier").bind("mousemove.magnifier",h)),e)){var k=n("#zoomWindow");if(0<k.length)k.one("click.magnifier touchend.magnifier",
function(c){y(!0)})}}function H(){c.useHoverZoom&&(V?d.bind("touchstart.magnifier touchmove.magnifier",k):F.acEnabled?t(d)&&b.bind("mousemove.magnifier",k):d.bind("mousemove.magnifier",k))}var u=this,b=d.offsetParent(),f={detailImageUrl:d.attr("data-old-hires"),location:"over",locationElement:d,prelaod:"ready",zIndex:50,offsetInClickZoom:50};c=n.extend(f,c);c.adjustment=[10,0,-10,0];var l=null,r=null,x=null,z=null,G=null,S={"null":1,"":1,undefined:1},Q=!1,J=!1,T=c.detailImageUrl,V=c.useHoverZoomIpad||
0,ga=0,ia={},ha=function(){function b(c){var a=Math.round(Math.min(d.width(),l.rect.width/c));c=Math.round(Math.min(d.height(),l.rect.height/c));k.css({width:a,height:c});f=[a,c]}var a=this,f=[0,0],h=(l.detailSize&&l.detailSize[0]||5E8)/z[2],e=(l.detailSize&&l.detailSize[1]||5E8)/z[3],h=e>h?e:h;n("#magnifierLens").remove();var k=n("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});c.generalImageUrls.zoomLensBackground&&k.css({backgroundImage:"url("+c.generalImageUrls.zoomLensBackground+
")"});F.showMagnifierOnHover?w(k):k.css("cursor","pointer");a.updatePosition=function(){var c=[z[2]-f[0],z[3]-f[1]],b=0>=c[0]?.5:Math.max(0,Math.min(1,(x[0]-f[0]/2-z[0]-a.offset.left)/c[0])),d=0>=c[1]?.5:Math.max(0,Math.min(1,(x[1]-f[1]/2-z[1]-a.offset.top)/c[1])),l=z[0]+Math.round(b*c[0]),c=z[1]+Math.round(d*c[1]);k.get(0).style.left=l+"px";k.get(0).style.top=c+"px";return[b,d]};a.destroy=function(){k.remove()};a.offset=d.offsetParent().offset();b(h);a.updatePosition();k.appendTo(d.parent());l.detailImage[0].complete||
l.detailImage.load(function(){var c=l.detailImage.width()/z[2];b(c);a.updatePosition()})};ha.preload=function(){u.preload(c.generalImageUrls.lensBackgroundUrl)};var fa=function(){function b(){var a={};if("over"===c.location){var a=c.useClickZoom,h={},e=n("#leftCol"),m=n("#centerCol"),g=n("#rightCol"),t=n("#hover-zoom-end"),r=n("#actionPanelContainer"),ga=p.isjQueryObjDefined(e)?e.outerHeight():m.outerHeight();h.top=p.isjQueryObjDefined(e)?e.offset().top:m.offset().top;h.bottom=ga+h.top;h.right=p.isjQueryObjDefined(g)?
g.offset().left:r.offset().left;h.left=a?0:e.offset().left+e.outerWidth();p.isjQueryObjDefined(t)&&t.offset().top>h.bottom&&(h.bottom=t.offset().top);a=h}else"right"===c.location&&(a=d.offset(),a={left:a.left+d.outerWidth(),top:a.top,right:a.left+d.outerWidth()+400,bottom:a.top+400});c.minHeightElement&&(a.bottom=Math.max(a.bottom,a.top+n(c.minHeightElement).outerHeight()));a.bottom=Math.min(a.bottom,n(A).scrollTop()+n(A).height());a.left+=l[0];a.top+=l[1];a.right+=l[2];a.bottom+=l[3];a.width=a.right-
a.left;a.height=a.bottom-a.top;c.enhancedHoverOverlay&&p.isDefined(A.pageXOffset)&&(h=n(A).width(),a.width=h-a.left+A.pageXOffset-18,a.height-=14);k.css({left:a.left,top:a.top,width:a.width,height:a.height});f.rect=a;return f}function a(b){var l=new Image;f.detailSize=[0,0];l.onload=function(){f.detailSize=[l.width,l.height];m()};l.src=b.attr("src");if(0<l.width&&0<l.height)f.detailSize=[l.width,l.height];else if(c.detailImageSize)f.detailSize=c.detailImageSize;else{b=q(l.src);var d=z[2]/z[3];b.SS||
b.AA?(b=b.SS||b.AA,f.detailSize=[b,b]):b.SX?f.detailSize=[b.SX,Math.round(b.SX/d)]:b.SY?f.detailSize=[Math.round(b.SY*d),b.SY]:b.SL&&(f.detailSize=1<=d?[b.SL,Math.round(b.SL/d)]:[Math.round(b.SL*d),b.SL])}}var f=this,l=c.adjustment;n("#zoomWindow").remove();var h={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:c.zIndex};c.enhancedHoverOverlay&&(h.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",h.border="1px solid #949494",h.borderColor="rgb(148,148,148)");var k=n("\x3cdiv id\x3d'zoomWindow' /\x3e").css(h);
c.fadeMagnifier&&k.fadeIn(200);c.useClickZoom&&(O?k.css("cursor",'url("'+c.zoomOutIcon+'"), auto'):(k.css("cursor","-webkit-zoom-out"),k.css("cursor","-moz-zoom-out"),k.css("cursor","zoom-out")));f.updateImage=function(c){c=n("\x3cimg id\x3d'detailImg' src\x3d'"+c+"'/\x3e").css("position","absolute");f.detailImage&&f.detailImage.remove();k.append(c);n(document).trigger("updated.magnifier");f.detailImage=c;a(f.detailImage)};f.refit=function(){b();a(f.detailImage);return f};c.fadeMagnifier?(f.show=
function(){k.fadeIn(200);return f},f.hide=function(){k.fadeOut(200);return f}):(f.show=function(){k.show();return f},f.hide=function(){k.hide();return f});f.destroy=function(){k.remove();return f};f.getWindowSize=function(){return[f.rect.left,f.rect.top,f.rect.width,f.rect.height]};f.updateImage(T);b();k.appendTo(document.body)},aa=!1,E,W=!1,ea;u.preload=function(a){a=n.makeArray(a);for(var c=a.length,b=0;b<c;b++)a[b]instanceof Array?u.preload(a[b]):"string"===typeof a[b]&&a[b]&&!S[a[b]]&&(S[a[b]]=
new Image,S[a[b]].src=a[b])};u.changeImage=function(a,b){Q&&y();T=b;d.attr("src",a);u.preload(a);z=[d.position().left,d.position().top,d.width(),d.height()];b&&("immediately"===c.preload?u.preload(b,!0):n(A).ready(function(){u.preload(b)}),l?l.updateImage(b):d.attr("data-old-hires",b))};u.destroy=function(){F.acEnabled?b.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):d.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");n(document).unbind("mousemove.magnifier");
r&&r.destroy();r=null;l&&l.destroy();l=null};u.detailImage=function(){return l.detailImage};u.suppressMagnifier=function(a){J=a};u.isEngaged=function(){return Q};u.engageMagnifier=k;u.disengageMagnifier=y;d[0].complete?H():d.one("load",H);u.preload(d.attr("src"));if(c.preload){var D=c.detailImageUrl,f=function(){u.preload(D,!0);c.useClickZoom||ha.preload()},R=c.preload;R.constructor!==Array&&(R=[R]);for(var ba=0;ba<R.length;ba++)if("immediately"===R[ba])f();else if(n(A)[R[ba]])n(A)[R[ba]](f);else n(A).bind(R[ba],
f)}return u}function m(){if(F.useHoverZoom){var a={adjustment:[0,0,1,1],generalImageUrls:F.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:F.useHoverZoomIpad,useHoverZoom:F.useHoverZoom,useClickZoom:F.useClickZoom,fadeMagnifier:F.fadeMagnifier,zoomOutIcon:F.staticImages.zoomOutCur,enhancedHoverOverlay:F.enhancedHoverOverlay||F.atfEnhancedHoverOverlay};x&&(x.destroy(),x=void 0);var c=J.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");
p.isjQueryObjDefined(c)?F.useClickZoom?(c.one("click.loadmagnifier touchstart.loadmagnifier",function(e){x=new d(c,a);x.engageMagnifier(e,!0)}),O?c.css("cursor",'url("'+F.staticImages.zoomInCur+'"), auto'):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor","zoom-in"))):x=new d(c,a):e.isEnabled&&C.logHoverZoomApplicability(n,e)}}var I,F,G,H,x,J,O=navigator.userAgent.match(/msie|trident/i);return function(a,c,d,g){I=this;F=a;G=c;e.refToModel=G;H=g;I.render=function(a,c,
d,k,e,m){J=d;x&&(x.destroy(),x=void 0)};I.update=function(a){};H.register("loadMagnifier",m);H.register("resize",m)}});"use strict";E.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(g,n,p,a){function e(d,e,g){d=(d=g?g:p.getColorFromState(e.getState().hovered_variations,q))&&""!==d?d:q.defaultColor;m.dispatch("updateView",{type:"swatchHover",data:{color:d}});a.postCountMetric("swatchHover")}function C(e,g,n,w){e=(e=w?w:p.getColorFromState(g.getState().selected_variations,
q))&&""!==e?e:q.defaultColor;e===d.getCurrentItem().color?"function"===typeof n&&n():(m.dispatch("updateSelection",{type:"swatchClick",data:{color:e},onload:n}),a.postCountMetric("swatchClick"))}var w,q,d,m;return function(a,n,p,H){w=this;q=a;d=n;m=H;g.on("image-block-twister-swatch-hover",e);g.on("image-block-twister-swatch-click",C);w.render=function(a,d,e,g,c){};w.update=function(a){}}});"use strict";E.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",
function(g,n,p,a,e,C,w){function q(b,f,d,l){!c.autoplayVideo||z||c.useChromelessVideoPlayer?!a.isjQueryObjDefined(b.find(".a-button-selected"))&&(d=B.getCurrentItem(),!l||c.prioritizeVideos||"chromeless-video"===d.type&&c.autoplayVideo)&&(l=a.getVideoHash(d.color,0,c),-1!==l&&(f+=0,t.dispatch("updateModel",{data:{index:0,thumbnailIndex:f,variant:l.variant,type:c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),f=b.find(".item").get(f),a.selectGivenThumbnail(n(f),b))):(a.selectGivenThumbnail(b.find("img:last"),
b),a.fadeToThumbnail(b.find("img").length-1,k,b))}function d(b){var f=B.getCurrentItem().color;if(c.useChildVideos&&!c.colorToVideo[f]){var d=function(){if(b){c.colorToVideo[f]=b;var a={type:"updatedData",data:B.getCurrentItem()};t.dispatch("updateView",a)}};c.lazyLoadExperienceDisabled?d():E.when(a.rankedImagesReadyEvent(c.colorToAsin[f].asin)).execute(function(){d()})}}function m(b){if(!c.useChildVideos)return a.lazyLoadingRequired(B.getCurrentItem(),B,c)?void 0:c.videos;if(c.colorToVideo[b])return c.colorToVideo[b];
var f=c.colorToAsin[b];if(f&&f.asin){var l={};l.params={asin:f.asin,productGroupID:c.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:c.useChromelessVideoPlayer,isUDP:c.isUDP};c.isDPXFeatureEnabled||(l.success=function(a){d(a)},e.load("/gp/product/features/apparel-main-image/videos.html",l));return c.colorToVideo&&c.colorToVideo[b]}}function I(){t.dispatch("selectThumbnail",a.useTabbedImmersiveView(c)?1:0)}function F(b,c,f,d){return p.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],
streamingUrls:c.url,swfUrl:f.swfUrl,foresterMetadataParams:f.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var c=a.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";C.postCountMetric("dppc_chromelessVideo:"+c)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){I();C.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){I();C.postCountMetric("dppc_chromelessVideo:ERROR")},
ended:function(){u.seek(0)}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(a,c,f){a=f.durationSeconds-f.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});I();n(this).show().css("opacity",1)})}}]})}function G(d){if("chromeful-video"===d.type||"chromeless-video"===d.type){var l=a.getVideoHash(d.color,d.index,c);if(-1===l)return-1;if("chromeful-video"===
d.type){d=k.width()/k.height();var e=parseInt(l.videoWidth,10),m=parseInt(l.videoHeight,10);a.updateAspectRatio(d,e,m,h);u?(u.show(),a.loadMediaIntoAiry(u,l,b,c.tabletWeb)):u=c.tabletWeb?r:a.createAiryInstanceForChromeful(h,l,b,null,c.autoplayVideo,k,y,M);b:if(a.useTabbedImmersiveView(c)){if(1<a.getVideosCount(B.getCurrentItem().color,c)){if(a.isDefined(L)){y.show();break b}L=n('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(c.staticStrings.watchMoreVideos);y.find("#videoCaption").append(L);
g.declarative.create(L,"videoIngressClick",f)}a.playVideoInImmersiveView(c,B.getCurrentItem().color)&&(g.declarative.create(h,"videoIngressClick",f),h.children().css("z-index","-1"),h.css("display","inline-block"))}else y.find("#videoCaption").text(c.staticStrings.playVideo),y.show();l=u;c.autoplayVideo&&l&&!z&&(a.toggleVideoCaption(y),l.setVolume(0),l.show(),l.play(),z=!0)}else u?(u.show(),a.loadMediaIntoAiry(u,l,b,c.tabletWeb),u.play(),y.show()):(u=F(h,l,b))&&u.play()}}function H(b,l,d){var h=m(l);
l=b;a.isDefined(h)&&0<h.length&&c.alwaysIncludeVideo&&b===c.maxAlts&&(M.find(".item:last").remove(),b--);a.isDefined(h)&&(n.each(h,function(l,d){if(b<c.maxAlts){var e=c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",k={type:e,index:l,thumbnailIndex:b,variant:d.variant};f={type:"video-ingress",index:l,thumbnailIndex:b,variant:d.variant};a.useTabbedImmersiveView(c)&&("chromeful-video"===e&&(K+=" videoBlockIngress  videoBlockDarkIngress",d.thumb=d.thumb.replace("_PKmb-play-button-overlay-thumb",
"")),c.altsOnLeft||(K+=" a-align-top"));a.createThumbnail(k,d.thumb,M,K);if(a.useTabbedImmersiveView(c)){x(M.find(".videoBlockIngress img"),c.videoIngressATFSlateThumbURL);var k=1<h.length?"multiple-videos":"one-video",g=1<h.length?h.length+" "+c.staticStrings.multipleVideos:c.staticStrings.singleVideo;g&&M.find(".videoBlockIngress").append(M.find("#videoCount_template").clone().text(g).attr("id","videoCount")).addClass(k)}A||(A=!0,C.postCountMetric("chromeless-video"===e?"dppc_chromelessVideoAvailable":
"dppc_chromefulVideoAvailable"));b++}if(a.useTabbedImmersiveView(c))return!1}),q(M,l,b,d));return b}function x(b,a){var c=b.attr("src");if(c&&a){b.attr("src",a);var f=new Image;f.onload=function(a){b.attr("src",c)};f.src=c}}function J(b){u&&u.pause();b.data=f;b.clickTimeStamp=b.$event.timeStamp;var a="a"===b.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";t.dispatch("imageClick",b);C.postTimeMetric("dpcc_vse_videoingressclick",b.$event.timeStamp);C.postCountMetric(a)}function O(b){r=b.airy;
r.hide=function(){r.pause();g.$("#main-video-container").find(".vse-airy-container").hide()};r.show=function(){g.$("#main-video-container").find(".vse-airy-container").show();r.play()};r.getMediaSourceInfo=function(){return a.getMediaSourceInfo()}}var N,c,B,t,M,h,y,k,L,u,b,f,l,r,A=!1,z=!1,K="videoThumbnail";return function(e,m,r,p){N=this;c=e;B=m;t=p;b=c.airyConfig;c.colorToVideo={};c.colorToVideo[c.landingAsinColor]=c.colorToVideo[c.defaultColor]=c.videos;N.render=function(b,f,d,e,m,t){M=e;h=m.find("#main-video-container");
y=h.parent().find("#video-canvas-caption");k=n("#main-image-container");c.useChromelessVideoPlayer||h.addClass("chromeful-container");l=H(f,b,t);G(B.getCurrentItem());a.useTabbedImmersiveView(c)&&g.declarative("videoIngressClick",["click"],J);b=B.getCurrentItem().color;f=a.getVideoHash(b,0,c);-1!==f&&c.tabletWeb&&(b=a.getNilgiriServiceAjaxRequest(c,b,f),w.get(g,"#main-video-container",b,function(){g.$("#main-video-container").find(".vse-airy-container").hide()},function(){g.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));
return l};N.update=function(b){var d=b.data;"ingress"!==d.type&&u&&(u.hide(),h.parent().css("z-index",-1),y.hide());if("swatchHover"===b.type)d.color===B.getCurrentItem().color?G(B.getCurrentItem()):b.captured||a.lazyLoadingRequired(d,B,c)&&!a.lazyLoadOnHoverEnabled(c)&&G(B.getCurrentItem());else if("chromeful-video"===d.type||"chromeless-video"===d.type)"mouseenter"===b.type&&C.postCountMetric("dpcc_videoThumbHovered_"+(d.thumbnailIndex+1)+"_"+l),G(d),c.usePeekHover&&"click"!==b.type||(a.selectGivenThumbnail(b.$declarativeParent,
M),"click"===b.type&&a.useTabbedImmersiveView(c)&&(C.postCountMetric("dpcc_videoThumbClicked_"+(d.thumbnailIndex+1)+"_"+l),f.action="videoIngressClick",f.clickTimeStamp=b.$event.timeStamp,t.dispatch("videoIngressClick",f),C.postTimeMetric("dpcc_vse_videoingressclick",b.$event.timeStamp)))};if(c.isDPXFeatureEnabled)g.on("triggerVideoAjax",d);g.on("vseAiry",O)}});"use strict";E.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric",
"imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(g,n,p,a,e,C,w,q,d,m){function I(b){return b.hiRes||b.large||b.main[b.main.length-1]}function F(){v.find("#ivTitle").click(function(){ja.hide()})}function G(){P=Pa?{type:"360-spin"}:R.getCurrentItem()}function H(){var b=v.find("#ivStage"),a=ja.$container.find(".a-popover-wrapper"),c=a.find(".a-popover-inner"),a=a.height()-m.getDimension(c,"padding-top")-m.getDimension(c,"padding-bottom");v.css("height",a);var c=v.find("#ivTitle").outerHeight(!0),
f=v.find("#ivVariationSelection").outerHeight(!0),d=v.find("#ivMediaSelection").outerHeight(!0),l=v.find("#ivThumbs"),h=m.getDimension(l,"margin-top")+m.getDimension(l,"margin-bottom");l.css("height",a-c-f-d-h);v.find("#ivLargeImage").css("height",a);b.css("width",v.width()-m.getDimension(v,"padding-left")-m.getDimension(v,"padding-right")-v.find("#ivThumbColumn").width()-m.getDimension(b,"margin-left")-m.getDimension(b,"margin-right"))}function x(){v.find("#ivMediaSelect").change(function(){var b=
a(this).val();"all"===b?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").show(),"chromeful-video"===P.type&&v.find("#ivVideo_"+P.index).click()):"images"===b?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").hide(),"chromeful-video"===P.type&&(0===ca&&0===X?v.find("#iv360").click():0===ca?v.find("#ivHeroImage_0").click():v.find("#ivImage_0").click())):"videos"===b&&(v.find("#ivVideoList").show(),v.find("#ivThumbs").hide(),"chromeful-video"!==
P.type?v.find("#ivVideoList_0").click():v.find("#ivVideoList_"+P.index).click())})}function J(){var b=v.find("#ivStage").find("#ivLargeImage"),a=b.width(),c=b.height(),f=b.find(".fullscreen");f.removeAttr("style");var d=f.width(),l=f.height();0<f.length&&(f[0].naturalWidth&&(d=f[0].naturalWidth),f[0].naturalHeight&&(l=f[0].naturalHeight));b.css("cursor","auto");var d=0===d?1:d,l=0===l?1:l,h=Math.min(a/d,c/l),e=l*h,k=d*h;1>h?(Qa?b.css("cursor","url('"+D.staticImages.zoomIn+"'), auto"):(b.css("cursor",
"-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in")),Ba=!0):Ba=!1;d=Math.min(k,d);l=Math.min(e-20,l);f.css({"margin-top":(c-l)/2,"margin-left":(a-d)/2,height:l,width:d});b.css("visibility","visible");Ca=!1}function O(b){var a=v.find("#ivLargeImage");a.css("visibility","hidden");a.empty();m.animateStageIn(a);a.append(b);J()}function N(){Y&&Y.pause();v.find("#ivLarge360").css("display","none");v.find("#ivLargeVideo").css("display","none");v.find("#ivLargeImage").css("display",
"none");k()}function c(b){N();v.find("#ivLargeImage").css("display","block");var c;"hero-image"===b?e.isDefined(da)&&(c=I(da[P.index])):e.isDefined(na)&&(c=I(na[P.index]));if(e.isDefined(c)){v.find(".fullscreen").remove();var f=a("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),d=v.find("#ivLargeImage");m.animateStageOut(d,function(){f.load(function(){O(f)});if(f[0].complete)O(f);else{d.empty();var b=(d.height()-104)/2,c=(d.width()-80)/2;a("\x3cimg\x3e").attr("src",D.staticImages.spinner).css({position:"relative",
top:b+"px",left:c+"px"}).appendTo(d)}})}}function B(){var b=parseInt(P.index,10)+1;b>=oa.length||v.find("#ivVideo_"+b).click()}function t(){var b;e.isDefined(oa)&&(b=oa[P.index]);if(e.isDefined(b)){N();var a=v.find("#ivLargeVideo").css("display","block");Y?(Y.isDetached()&&Y.attach(a[0]),e.loadMediaIntoAiry(Y,b,ya,D.tabletWeb),Y.show()):(Y=e.createAiryInstanceForChromeful(a,b,ya,"ImmersiveView"),ya.enableContinuousPlay&&Y.bind("ended",B));Y.play({isAsync:!0})}}function M(){G();var b;b="hero-image"===
P.type?v.find("#ivHeroImage_"+P.index):"image"===P.type?v.find("#ivImage_"+P.index):"chromeful-video"===P.type||"chromeless-video"===P.type?v.find("#ivVideo_"+P.index):"360-spin"===P.type?v.find("#iv360"):e.isDefined(da)?v.find("#ivHeroImage_"+P.index):v.find("#ivImage_"+P.index);e.isjQueryObjDefined(b)||(b=v.find("#ivImage_0"));h(b)}function h(b){v.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")?(P.type="chromeful-video",P.index=b.attr("id").split("_")[1],
t()):b.hasClass("ivHeroImage")?(P.type="hero-image",P.index=b.attr("id").split("_")[1],c(P.type)):b.hasClass("iv360Image")?(P.type="360-spin",P.index=0,y()):(P.type="image",P.index=b.attr("id").split("_")[1],c(P.type))}function y(){N();v.find("#ivLarge360").css("display","block");l();var b=v.find("#ivLarge360");b.css({opacity:0});setTimeout(function(){b.css({opacity:.4});m.animateStageIn(b)},200);u();w.postCountMetric("dppc_click360");ua=Date.now()}function k(){0<ua&&(L("dppc_duration360",Date.now()-
ua),ua=0)}function L(b,a){A.ue&&A.ue.count(b,a)}function u(){if(0<ra){var b=v.find(".iv360Hint");b.removeClass("iv360HintFaded");b.animate({opacity:1},200)}}function b(c,f){if(ra<c.length){var d=a("\x3cimg /\x3e").css({display:"block",width:6*pa+"px",height:va+"px"});d.hide();f.append(d);d.get(0).onload=function(){f.closest(document.documentElement).length&&(ra++,1===ra&&(u(),0<ua&&L("dppc_loadTime360",Date.now()-ua)),0<Ia&&L("dppc_perSpriteloadTime360",Date.now()-Ia),v.find("#iv360Spinner").hide(),
d.show(),za=5*U.imageLocations[Math.floor(Aa/U.imageLocations[0].length)][Aa%U.imageLocations[0].length],b(c,f))};d.attr("src",c[ra].replace(/(\._SP)\d+(,)\d+/,"$1"+wa+"$2"+xa));Ia=Date.now()}}function f(b){if(e.isDefined(U.spriteWidthSizes)&&0<U.spriteWidthSizes.length){var a=U.spriteWidthSizes,c=a.length,f=a[0],d=a[c-1];if(b<=f)return f;if(b>d)return d;for(f=0;f<c;f++)if(b>a[f]&&b<=a[f+1])return a[f+1]}else return b}function l(){var b=v.find("#ivLarge360");b.children("#image-360-sprites").length||
(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",D.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ja=!0,r())}function r(){if(e.isDefined(U.spriteURLs)&&
e.isDefined(v)&&Ja&&!Ka){var c=v.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(U.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",U.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(D.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=U.imageWidth,l=U.imageHeight,h=c.parent().width(),k=c.parent().height(),
g=0,m=0;d/l>h/k?(wa=f(h),xa=Math.round(l/d*wa),pa=Math.ceil(h),va=Math.ceil(xa/wa*h),m=(k-va)/2):(xa=f(k),wa=Math.round(d/l*xa),va=Math.ceil(k),pa=Math.ceil(wa/xa*k),g=(h-pa)/2);c.css({"margin-left":g,"margin-top":m,width:pa+"px",height:va+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*pa+"px");b(U.spriteURLs,v.find("#image-360-sprites"),0);d=v.find("#ivLarge360");d.bind("mousedown",S);d.bind("touchstart",E);d.bind("touchmove",z);d.bind("touchend",K);a(document).bind("mousemove",
Q);a(document).bind("mouseup",Z);e.isDefined(D.staticImages.grab)&&c.css("cursor","url('"+D.staticImages.grab+"'), auto");Ka=!0}}function E(b){Da=!0;La=b.originalEvent.targetTouches[0].clientX}function z(b){Da&&(T(b.originalEvent.targetTouches[0].clientX-La),La=b.originalEvent.targetTouches[0].clientX)}function K(b){Da&&(Da=!1)}function S(b){Ea=!0;Ma=b.originalEvent.clientX;e.isDefined(D.staticImages.grabbing)&&(b=v.find("#ivLarge360"),b.css("cursor","url('"+D.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor",
"url('"+D.staticImages.grabbing+"'), auto"));return!1}function Q(b){Ea&&(T(b.originalEvent.clientX-Ma),Ma=b.originalEvent.clientX)}function Z(b){Ea&&(Ea=!1,e.isDefined(D.staticImages.grab)&&(b=v.find("#ivLarge360"),b.css("cursor","url('"+D.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function T(b){for(b=za-=b/pa*180;0>b;)b+=360;for(;360<b;)b-=360;za=b;var a;b=360;for(var c=0;c<ra;c++)for(var f=0;f<U.imageLocations[c].length;f++){var d=Math.abs(za-5*U.imageLocations[c][f]);
d<b&&(b=d,a=c*U.imageLocations[0].length+f)}a!==Aa&&(b=Math.floor(a/U.imageLocations[0].length),b!==Math.floor(Aa/U.imageLocations[0].length)&&(e.isDefined(Na)||(Na=document.createElement("canvas").getContext("2d")),c=v.find("#image-360-sprites").children(),Na.drawImage(c[b],0,0)),b=v.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));Aa=a;b=a%U.imageLocations[0].length*-1*pa;a=-1*Math.floor(a/U.imageLocations[0].length)*va;c=v.find("#ivLarge360").children("#image-360-sprites");
c.css("-webkit-transform","translate3d("+b+"px, "+a+"px, 0)");c.css("transform","translate3d("+b+"px, "+a+"px, 0)")}function V(){v.delegate(".ivThumb","click",function(){var b=a(this);h(b)});v.delegate(".ivThumbVideoListOuter","click",function(){v.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");P.type="chromeful-video";P.index=b.attr("id").split("_")[1];t()})}function ga(){Y&&!Y.isDetached()&&(ya.volume=Y.getVolume(),Y.detach(),!document.all||A.atob||document.addEventListener||
(Y=null));v.find("#ivLargeImage").empty();k()}function ia(b,a){return 0<a?a/2:Math.min(0,Math.max(a,b))}function ha(b){var c=sa.left-(b.pageX-Fa[0])*Ga;g.capabilities.rtl&&(c=sa.left-(a(A).width()-b.pageX-Fa[0])*Ga);b=sa.top-(b.pageY-Fa[1])*Ga;c=ia(c,Ha.left);b=ia(b,Ha.top);v.find(".fullscreen").css({left:c,top:b})}function fa(){v.delegate("#ivLargeImage","click",function(b){if(Ca)J();else if(Ba){v.find(".fullscreen").removeAttr("style");if(Ba){var a=v.find("#ivLargeImage"),c=a.find(".fullscreen");
Qa?a.css("cursor","url('"+D.staticImages.zoomOut+"'), auto"):(a.css("cursor","-webkit-zoom-out"),a.css("cursor","-moz-zoom-out"),a.css("cursor","zoom-out"));Ca=!0;var f=v.find("#ivLargeImage");Ha.left=f.width()-c.width();Ha.top=f.height()-c.height();var f=a.height()/2,d=a.width()/2;Fa=[a.offset().left+d,a.offset().top+f];sa.top=f-c.height()/2;sa.left=d-c.width()/2;c.css({position:"relative",left:sa.left,top:sa.top});Ga=Math.max(c.height()/a.height(),c.width()/a.width())}ha(b)}});v.delegate("#ivLargeImage",
"mousemove",function(b){Ca&&ha(b)})}function aa(b){if(e.isImmersiveViewEnabled(D,R.getCurrentItem().color)){Pa=e.isDefined(b)&&"button-360-click"===b.action;q.isEnabled&&d.logImmersiveViewRequestServed(q);w.postCountMetric("dppc_immersiveViewOpened");if(e.isDefined(ja))ja.show();else{b=a("#auiImmersiveViewDiv");var c=a(A).height()-150,f=a(A).width()-75;ja=n.create(b,{name:"immersiveView",activate:"onclick",width:f,height:c,popoverLabel:"ImmersiveView",hideHeader:!0});b.click()}if(Oa){v=a("#ivMain");
b=R.getCurrentItem().color;na=D.colorImages[b];da=D.heroImage[b];oa=D.useChildVideos?D.colorToVideo[b]:D.videos;ta=W()&&D.spin360ColorEnabled[b];U=W()?D.spin360ColorData[b]:void 0;G();ka=X=qa=ca=0;e.isDefined(da)&&(X=da.length);e.isDefined(na)&&(ca=na.length);e.isDefined(oa)&&(qa=oa.length);ta&&(ka=1);m.populateTitle(v.find("#ivTitle"),45,D);m.populateVariationSelection(v.find("#ivVariationSelection"));b=v.find("#ivMediaSelect");0===ca+ka||0===qa?(b.parent().hide(),v.find("#ivThumbs").addClass("noMediaSelection")):
(b.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(D.staticStrings.allMedia+" ("+(X+ca+ka+qa)+")").appendTo(b),a("\x3coption/\x3e").attr("value","images").text(D.staticStrings.images+" ("+(X+ca+ka)+")").appendTo(b),a("\x3coption/\x3e").attr("value","videos").text(D.staticStrings.videos+" ("+qa+")").appendTo(b),b.parent().show(),b.val("all"));b=v.find("#ivThumbs");b.find(".ivRow").not(".placeholder").remove();for(var c=X+ca+qa+ka,l=f=0;f<c;)for(var h=b.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(b),
k=0;3>k&&f<c;k++,f++,l++)if(l<X){var t=da[f].thumb,r=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+f).appendTo(h);r.find(".ivThumbImage").css("background",'url("'+m.getResizedThumbnailURL(t)+'") center no-repeat')}else if(l>=X&&l<ca+X)t=na[f-X].thumb,r=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-X)).appendTo(h),r.find(".ivThumbImage").css("background",'url("'+m.getResizedThumbnailURL(t)+
'") center no-repeat');else if(l>=X+ca&&l<ca+X+ka)r=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(h),r.find(".ivThumbImage").css("background",'url("'+(e.isDefined(D.staticImages.icon360)?m.getResizedThumbnailURL(D.staticImages.icon360,!0):"")+'") center no-repeat');else if(t=oa[f-ca-X-ka],r=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(f-ca-X-ka)).appendTo(h),r.find(".ivThumbImage").css("background",
'url("'+t.thumbUrl+'") center no-repeat'),e.isDefined(t)){var y={position:"triggerTop"},p=v.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");p.find(".ivVideoPopoverTitle").text(t.title);p.find(".ivVideoPopoverDuration").text(t.durationTimestamp);y.inlineContent=p[0];g.declarative.create(r,"a-tooltip",y)}b=v.find("#ivVideoList");b.find(".ivThumbVideoListOuter").not(".placeholder").remove();c=b.find(".placeholder");for(f=0;f<qa;f++)l=oa[f],h=c.clone().removeClass("placeholder").appendTo(b),
h.attr("id","ivVideoList_"+f),h.find(".ivThumbImage").css("background",'url("'+l.thumbUrl+'") center no-repeat'),h.find(".ivThumbTitle").text(l.title),h.find(".ivThumbDuration").text(l.durationTimestamp);v.find("#ivLarge360").empty();ra=0;Ka=Ja=!1;ya=D.airyConfig;Oa=!1;Ra()}}}function ma(b){var a=D.colorToAsin[b],c={},f=500;if(a&&a.asin){c.params={asin:a.asin};var d="360"+a.asin,l=Date.now();c.success=function(a){L("dppc_asyncRequestTime360",Date.now()-l);a&&e.isDefined(a.spin360.spin360Model)?(e.ajaxState(d,
"success"),D.spin360ColorData[b]=a.spin360.spin360Model,b===R.getCurrentItem().color&&(U=D.spin360ColorData[b],r())):c.error()};c.error=function(){w.postCountMetric("dppc_asyncFailed360");L("dppc_asyncRequestTime360",Date.now()-l);f*=2;16E3>=f?setTimeout(function(){l=Date.now();C.load("/gp/product/features/apparel-main-image/360.html",c)},f):e.ajaxState(d,"fail")};e.ajaxState(d)&&"fail"!==e.ajaxState(d)||(C.load("/gp/product/features/apparel-main-image/360.html",c),e.ajaxState(d,"sent"))}}function W(){return e.isDefined(D.spin360ConfigEnabled)&&
D.spin360ConfigEnabled}var ea,D,R,ba,ja,v,da,na,oa,X,ca,qa,ka,P,Y,ya,U,ta,pa,va,xa,wa,Ma,La,Pa=!1,Ja=!1,Ka=!1,za=0,Aa=0,ua=0,Ia=0,Ea=!1,Da=!1,ra=0,Na,Qa=navigator.userAgent.match(/msie|trident/i),Oa=!0,Ca=!1,Ba=!1,Ha={},sa={},Ga,Fa,Ra=g.once(function(){x();V();fa();g.on("a:popover:afterUpdatePosition:immersiveView",H);g.on("a:popover:afterShow:immersiveView",M);g.on("a:popover:afterHide:immersiveView",ga);F()});return function(b,c,f,d){ea=this;D=b;R=c;q.refToModel=R;ba=d;W()&&(D.spin360ColorData[D.landingAsinColor]=
D.spin360ColorData[D.defaultColor],D.spin360ColorEnabled[D.landingAsinColor]=D.spin360ColorEnabled[D.defaultColor]);e.isDefined(D.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",m.addStyleCodeToURL(D.staticImages.icon360,"_FMpng_RI_"));ea.render=function(b,a,c,f,d,l){Oa=!0;W()&&D.spin360ColorEnabled[b]&&!e.isDefined(D.spin360ColorData[b])&&(D.spin360ColorData[b]={},ma(b));e.isImmersiveViewEnabled(D,R.getCurrentItem().color)&&W()&&D.spin360ColorEnabled[b]&&
(a===D.maxAlts&&(b=f.find(".item.imageThumbnail"),c=f.find(".item.videoThumbnail"),e.isDefined(c)&&1<c.length?c.last().remove():b.last().remove(),a--),b=f.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),g.declarative.create(b,"button-360-click"),f.append(b),a++,w.postCountMetric("dppc_display360"));return a};ea.update=function(b){};ba.register("imageClick",aa);ba.register("button360Click",aa)}});"use strict";E.when("A","a-modal","a-tooltip",
"jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(g,n,p,a,e,C,w,q,d,m){function I(){var d=J.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),e=d.find(".a-popover-inner"),d=d.height()-m.getDimension(e,"padding-top")-m.getDimension(e,"padding-bottom");a("#iv-tab-view-container").css("height",d);c=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==
a(this).css("display")}).length;1<c?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),e=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),d-=e):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",d);g.trigger("dp:image-block:immersive-view:resize")}function F(){g.trigger("dp:image-block:immersive-view:reset")}function G(c){if(e.isImmersiveViewEnabled(x,J.getCurrentItem().color)){q.isEnabled&&d.logImmersiveViewRequestServed(q);
w.postCountMetric("dppc_immersiveViewOpened");e.isDefined(c)&&("button-360-click"===c.action?a("#iv360TabHeading").click():"videoIngressClick"===c.action?(B=c.clickTimeStamp,a("#ivVideosTabHeading").click()):a("#ivImagesTabHeading").click());var m=J.getImmersiveViewModalInstance();if(e.isDefined(m))m.show();else{c=a("#auiImmersiveViewDiv");var m=Math.min(Math.max(a(A).height()-150,540),1080),k=Math.min(Math.max(a(A).width()-75,990),1980),m=n.create(c,{name:"immersiveView",activate:"onclick",width:k,
height:m,popoverLabel:"ImmersiveView",hideHeader:!0});J.setImmersiveViewModalInstance(m);c.click()}N&&(N=!1,t(),g.trigger("dp:image-block:immersive-view:init"))}}var H,x,J,O,N=!0,c=0,B,t=g.once(function(){g.on("a:popover:afterUpdatePosition:immersiveView",I);g.on("a:popover:afterShow:immersiveView",I);g.on("a:popover:afterHide:immersiveView",F)}),M=g.once(function(){var c=a("#iv-tab-view-container ul.iv-tab-views li");c.bind("click",function(d){var e=c.filter(".iv-active");e.attr("id")!==a(this).attr("id")&&
g.trigger("dp:ivTabs:"+e.find("a").attr("data-iv-tab-view")+":deselect",d);c.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();e=a(this).find("a").attr("data-iv-tab-view");a("#"+e).show();"ivVideosTab"===e&&(d.clickTimeStamp=B||d.timeStamp);g.trigger("dp:ivTabs:"+e+":select",d);w.postCountMetric("dppc_"+e);return!1})});return function(a,c,d,m){H=this;x=a;J=c;q.refToModel=J;O=m;H.render=function(a,b,c,d,e,h){w.postCountMetric("dpcc_altThumbs_"+
b);N=!0};H.update=function(a){};H.getTitle=function(){};H.getVariationSelectionInfo=function(){};M();O.register("imageClick",G);O.register("button360Click",G);e.useTabbedImmersiveView(x)&&O.register("videoIngressClick",G)}});"use strict";E.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(g,n,p){return{load:function(a,e){e=e||{};e.timeout=e.timeout||4E3;g.ajax(a,e)}}});"use strict";E.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric",
"postEarlyMetric").register("imageBlockUtils",function(g,n,p,a,e,C,w,q){function d(b){return null!==b&&"undefined"!==typeof b}function m(b){var a=0;n.each(b,function(b,c){var d=parseInt(c[1],10);d>a&&(a=d)});return a}function I(b){var a=0;n.each(b,function(b,c){var d=parseInt(c[0],10);d>a&&(a=d)});return a}function F(b,a,c){a=a.width();if(c.naturalMainImageSize)return a;b=m(b);0<b&&(a=Math.min(a,b));return a}function G(b,a,c){a=a.height();if(c.naturalMainImageSize)return a;b=I(b);0<b&&(a=Math.min(a,
b));return a}function H(b){var a;n.each(b,function(b,c){d(a)||(a=c[1]/c[0])});return a||1}function x(b,a,c){a.fadeTo(500,0,function(){O(b,c);a.fadeTo(500,1)})}function J(b){b&&b.toggle()}function O(b,a){var c=a.find("img");d(c[b])&&n(c[b]).click()}function N(b,a){u[b]=a?a:u[b];return u[b]}function c(b,a,c){c=c||L;c=c.colorImages;if(1>c.length||!d(c[b])||!d(a))return-1;var e=-1;n.each(c[b],function(b,c){c.variant===a&&(e=b)});return e}function B(b,a,c){c=c||L;c=c.colorImages;return!(d(c)&&d(c[b])&&
d(c[b][a])&&d(c[b][a].main))||1>n.map(c[b][a].main,function(b,a){return a}).length?-1:c[b][a]}function t(b,a,c,d){d.parent().css("z-index",2);0!==c&&0!==a&&(a/=c,b>a?d.css("width",a/b*100+"%"):d.css("height",b/a*100+"%"))}function M(b,a){var c;if(c=b.useIV)c=b.colorImages&&b.colorImages[a]&&0<b.colorImages[a].length?!0:!1;w.isEnabled&&(w.IVApplicaple=c,q.logImmersiveViewApplicability(n,w));return c}var h,y,k,L=n.extend(!0,{},e,C),u={};return{isDefined:d,isDefinedAndEmpty:function(b){return d(b)&&
"object"===typeof b&&0===Object.keys(b).length},isUndefinedOrEmpty:function(b){return d(b)?"object"===typeof b&&0===Object.keys(b).length:!0},isDefinedAndNotEmpty:function(b){return d(b)?"object"===typeof b&&0<Object.keys(b).length:!1},isjQueryObjDefined:function(b){return 0!==b.length},getAspectRatio:H,getMaxHeightOfMainImage:G,getMaxWidthOfMainImage:F,getMaxDimensionsOfMainImage:function(b,a,c){if(c.acEnabled)return[a.height(),a.width()];var d=G(b,a,c);a=F(b,a,c);b=H(b);c=a/b;a=Math.min(a,d*b);
d=Math.min(d,c);return[d,a]},getContainerHeight:function(b,a,c){var e=b.get(0);b=0;if(d(e)){b=e.offsetWidth/a;b=Math.min(b,c);var h;a=L.mainImageHeightPartitions;c=L.mainImageMaxSizes;if(d(c)&&d(a)){for(var k=0,m=A.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e=0;e<a.length;e++)m>a[e]&&(k=e+1);c.length>=k&&(h=c[k])}d(h)&&(b=Math.min(h[1],b))}return b},getColorFromState:function(b,a){if(b){a=a||L;var c="";n.each(a.visualDimensions,function(a,d){b[d]&&(c+=" "+b[d])});
return c&&c.substring(1)}},createThumbnail:function(b,a,c,e){var h=c.find(".template").clone().removeClass("template").addClass("item"),k=document.createElement("img");k.src=a;h.find(".placeHolder").replaceWith(k);(a=b.heroVideoVariant)&&"hero-image"===b.type&&b.variant===a&&h.addClass("heroImageThumbnail");d(e)&&h.addClass(e);g.declarative.create(h,"thumb-action",b);c.append(h)},selectGivenThumbnail:function(b,a){var c=b.find(".a-button");a.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");
c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(b,c,d,e,k,m,g,t){var q=n.extend({},d.foresterMetadataParams);null!==e&&(q.method+="."+e);var w=[];c.disabledViewIds&&(w=c.disabledViewIds);return p.embed({parentElement:b[0],streamingUrls:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,swfUrl:d.swfUrl,foresterMetadataParams:q,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:c.slateUrl,
postMediaSlate:c.slateUrl},videoAds:d.videoAds,bindings:{play:function(){"ImmersiveView"===e?h||(h=!0,a.postCountMetric("dppc_chromefulVideoPlayedIV")):y||(y=!0,a.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(b,a,c){k&&(x(0,m,t),J(g))}}],disabledViewIds:w})},loadMediaIntoAiry:function(b,a,c,d){b&&b.getMediaSourceInfo()!==a.url&&(d?(k={mediaSourceInfo:[a.url],contentId:a.mediaObjectId,refTag:"vse_ib_tablet_web"},b.loadMedia(k)):
b.loadMedia({mediaSourceInfo:a.url,contentId:a.mediaObjectId,contentMinAge:Number(a.minimumAge||"")||0,contentTitle:a.title,slateImages:{preloadSlate:a.slateUrl,postMediaSlate:a.slateUrl}}))},showUnavailable:function(b){b&&(n("#imageBlock .unvailableVariation").html(b),n("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){n("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:x,toggleVideoCaption:J,selectThumbnail:O,spinner:function(b,a){var c=n("#imageBlock .a-spinner").parent();
0===c.length&&(c=n("\x3cdiv\x3e\x3c/div\x3e").append(n("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),b.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));a?c.show():c.hide();return c},rankedImagesReadyEvent:function(b){return"ranked-images-ready-for-"+
b},ajaxState:N,getIndexForVariant:c,getImageHash:B,lazyLoadingRequired:function(b,a,d){a=Math.max(c(b.color,a.getCurrentItem().variant,d),0);a=-1!==B(b.color,a,d);b=d.colorToAsin[b.color]&&d.colorToAsin[b.color].asin;b=!b||"success"!==N(b);return!d.lazyLoadExperienceDisabled&&!a&&b},lazyLoadOnHoverEnabled:function(b){return!b.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:t,repositionVideoBanner:function(b,a,c,d){setTimeout(function(){var c=b.width()/b.height();t(c,16,9,a)},d||0)},getVideosCount:function(b,
a){return a.useChildVideos&&a.colorToVideo[b]?a.colorToVideo[b].length:a.videos?a.videos.length:0},getVideoHash:function(b,a,c){if(c.useChildVideos){if(!d(c.colorToVideo))return-1;b=c.colorToVideo[b]}else b=c.videos;return d(b)&&d(b[a])&&d(b[a].url)?b[a]:-1},isImmersiveViewEnabled:M,playVideoInImmersiveView:function(b,a){return M(b,a)&&b.useTabbedImmersiveView},useTabbedImmersiveView:function(b){return b.useTabbedImmersiveView},getMediaSourceInfo:function(){return d(k)?k.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(b,
a,c){a=b.colorToAsin[a]&&b.colorToAsin[a].asin;a=d(a)?a:b.mediaAsin;return{pageContext:{page:"DetailPageTablet",placement:"ImageBlock",marketplaceID:c.marketPlaceID,locale:c.languageCode,requestId:b.requestId,product:{contentID:a,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:"ASIN",imageURL:c.slateUrl,videoURL:c.url}},configuration:{id:"div-light-player",type:"lightplayer",binder:"lightplayer",assets:["VSECommonComponentAssets","Brila"],features:{features:{placementcontext:"vse_ib_tablet_web"}}}}}}});
"use strict";E.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(g,n,p,a,e){function C(c,d,e,m){if(!p.isjQueryObjDefined(c.find(".a-button-selected"))){var k=J.getCurrentItem();if(!m||"chromeless-video"!==k.type||!x.autoplayVideo){m=0;if("hero-image"===k.type){m=q(k.color,k.variant);if(-1===m)return;m=-1!==m?m:0}var g=d+m;g>=e&&(m=0,g=d);d=a.getHeroImageHash(x,k.color,m);-1!==d&&(O.dispatch("updateModel",{data:{index:m,thumbnailIndex:g,
variant:d.variant,type:"hero-image"}}),d=c.find(".item").get(g),p.selectGivenThumbnail(n(d),c))}}}function w(a,c,d){if("hero-video"===J.getCurrentItem().type)return a;c=x.heroImage&&x.heroImage[c];var e=a;p.isDefined(c)&&(n.each(c,function(c,d){a<x.maxAlts&&(p.createThumbnail({type:"hero-image",index:c,thumbnailIndex:a,variant:d.variant},d.thumb,N,"imageThumbnail"),a++)}),C(N,e,a,d));return a}function q(a,c){var d=x.heroImage;if(1>d.length||!p.isDefined(d[a])||!p.isDefined(c))return-1;var e=-1;n.each(d[a],
function(a,d){d.variant===c&&(e=a)});return e}function d(){if(c.length&&x.repositionHeroImage){var d=a.getHeroDimParams(x,J.getCurrentItem()),e;p.isDefined(d)&&(e=p.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+"px ",c.css({"background-position":e,"background-size":d.width+"px "+d.height+"px ","max-width":d.width+"px ","min-height":d.height+"px ",filter:"","-ms-filter":""}))}}function m(d,e,h,m){if(c.length&&d&&e){if("function"===typeof h||m){var k=new Image;k.onload=m?function(){c.css("background-image",
'url("'+d+'")')}:h;k.src=d}h=e[1];var k=e[0],g;m||c.css({"background-image":'url("'+d+'")'});x.repositionHeroImage&&(e=a.getHeroDimParams(x,J.getCurrentItem(),e),p.isDefined(e)&&(h=e.width,k=e.height,g=p.isDefined(e.xPos)?e.xPos+"px "+e.yPos+"px ":"center "+e.yPos+"px "));c.css({"background-position":g,"background-size":h+"px "+k+"px ","max-width":h+"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function I(c,d,e,g){c=a.getHeroImageHash(x,c,d);if(-1===c)return-1;d=n.map(c.main,function(a,
c){return c})[0];m(d,c.main[d],e,g)}function F(c,d,e){if("hero-image"!==c.type)return-1;var m=q(c.color,J.getCurrentItem().variant),m=-1!==m?m:0;if(-1===a.getHeroImageHash(x,c.color,m))return-1;var k=J.getCurrentItem();c.thumbnailIndex=k.thumbnailIndex;c.type=k.type;c.variant=k.variant;c.index=m;G(c,d,e)}function G(d,e,m){var n=a.getHeroImageHash(x,d.color,d.index),k;k=d&&B&&g.equals(d,B)?!0:!1;B||(B=d);if(!k&&d||e)I(d.color,d.index,e,m),B=d;c.removeClass("hide-background");g.trigger("dp:image-block:update",
n)}var H,x,J,O,N,c,B={};return function(a,e,m,g){H=this;x=a;J=e;O=g;x.heroImage[x.landingAsinColor]=x.heroImage[x.defaultColor];H.render=function(a,d,e,b,f,m,h){N=b;c=n("#heroImage");a=w(d,a,m);F(J.getCurrentItem(),h,m);return a};H.update=function(a){var d=a.data;"ingress"!==d.type&&c.addClass("hide-background");"swatchHover"===a.type?a.captured||(d.type=J.getCurrentItem().type,-1!==F(d)&&(a.captured=!0)):"hero-image"===d.type&&(G(d),"click"!==a.type&&x.usePeekHover||p.selectGivenThumbnail(a.$declarativeParent,
N))};O.register("resize",d)}});"use strict";E.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(g,n,p,a,e){var C,w,q,d;return function(a,e,n,G){C=this;w=a;q=G;C.render=function(a,e,m,n,q,c,I){d=n;C=this;m=w.maxAlts;n=e;q=w.colorImages[a]?w.colorImages[a].length:0;q+=p.getVideosCount(a,w);a=w.heroImage[a];c=0;a&&(c=a.length);a=q+c;a>m&&(m=a-m,a=d.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),
m+="+",n={type:"ingress",index:0,thumbnailIndex:e,variant:""},a.find("#altIngressText").append(m),g.declarative.create(a,"thumb-action",n),d.append(a),n=e++);return n};C.update=function(a){"ingress"===a.data.type&&"click"===a.type&&q.dispatch("imageClick",a)}}});"use strict";E.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(g,n,p){return function(a,e,g){this.getImageHash=function(e){var n=g.getCurrentItem();e=p.getIndexForVariant(n.color,e||"MAIN",a);return p.getImageHash(n.color,
e,a)};this.onImageUpdateForTwister=function(a){e.register("updateSelection",function(e){"swatchClick"===e.type&&"function"===typeof a&&a()})}}});"use strict";E.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(g,n,p){function a(a,e){var d;if(e.repositionHeroImage){d=a[1];var m=a[0];if(768>=(A.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=.7,m*=.7;else{var g=((A.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-
1024)/256,g=Math.max(Math.min(g,1),0);d*=.7+.3*g;m*=.7+.3*g}d=[d,m]}return d}function e(a,e,d){var m;if(d.repositionHeroImage){var g=A.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(p.isDefined(d)){m=Math.max((g-Math.min(1500,a))/2,0);var n=Math.max((g-a)/2,0);m-=n;g=Math.max(Math.min(g,1500),1024);m=m+(g-420-23)/2-a/e[1]*d}}return m}function C(a,e,d){a=a.heroImage;return!(p.isDefined(a)&&p.isDefined(a[e])&&p.isDefined(a[e][d])&&p.isDefined(a[e][d].main))||
1>n.map(a[e][d].main,function(a,d){return d}).length?-1:a[e][d]}return{getHeroImageHash:C,getHeroDimParams:function(g,q,d){if(g.repositionHeroImage){if(!p.isDefined(d)){d=C(g,q.color,q.index);if(-1===d)return;q=n.map(d.main,function(a,d){return d})[0];d=d.main[q]}q=a(d,g);g=e(q[0],d,g);return{height:q[1],width:q[0],xPos:g,yPos:75}}}}});"use strict";E.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(g,n,p,a,e,
C,w){function q(a,d){var e=g.copy(a);if(w.isDefined(a)&&a.length>d){try{for(var n=-1,p=0;p<a.length;p++){var q=a.charAt(p);if(" "===q||"."===q||"?"===q||";"===q||","===q||":"===q)n=p;if(p===d-4){e=a.substring(0,-1===n?p:n);break}}}catch(C){e=a.substring(0,d-3)}e+="..."}return e}function d(a,d){var e=a.lastIndexOf(".");return a="_"===a.charAt(e-1)?a.substring(0,e-1)+d+a.substring(e):a.substring(0,e)+"."+d+a.substring(e)}return{getDimension:function(a,d){var e=parseInt(a.css(d),10);return isNaN(e)?
0:e},attachTabSelectHandler:function(a,d){g.on("dp:ivTabs:"+a+":select",d)},attachTabDeselectHandler:function(a,d){g.on("dp:ivTabs:"+a+":deselect",d)},attachImmersiveViewResizeHandler:function(a){g.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){g.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){g.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(a){n("#"+a).hide()},unhideTabHeading:function(a){n("#"+
a).show()},addStyleCodeToURL:d,getResizedThumbnailURL:function(a,e){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var g="_AA50_";e&&(g+="FMpng_RI_");return d(a,g)},populateVariationSelection:function(a){if(w.isDefined(A.DetailPage)&&w.isDefined(A.DetailPage.StateController)){a.empty();var d=A.DetailPage.StateController.getState(),e=d.variation_label_order,
g;for(g in e)if(e.hasOwnProperty(g)){var p=e[g],q=d.selected_variations[p],p=d.variation_display_labels[p];q&&n("\x3cdiv/\x3e").addClass("ivVariations").text(p+":"+q).appendTo(a)}}},populateTitle:function(a,d,e){a.html(e.title);a.attr("title",a.text());a.html(q(e.title,d))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,d){a.animate({opacity:.4},100,d)},logError:function(a,d,e,g){A.ueLogError&&A.ueLogError(g,{logLevel:a,attribution:d,message:e})}}});"use strict";
E.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(g,n,p,a,e,C,w,q){function d(){q.populateTitle(k.find("#ivTitle"),160,h)}function m(){var a=y.getCurrentItem().color;u=h.colorImages[a];L=h.heroImage[a];b=f=0;e.isDefined(L)&&(b=L.length);e.isDefined(u)&&(f=u.length)}function A(a){return a.hiRes||a.large||a.main[a.main.length-1]}function F(){var a=k.find("#ivStage").find("#ivLargeImage"),
b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,g=Math.min(b/e,c/f),l=f*g,m=e*g;1>g?(r?a.css("cursor","url('"+h.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),K=!0):K=!1;e=Math.min(m,e);f=Math.min(l-20,f);d.css({"margin-top":(c-
f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");z=!1}function G(a){var b=k.find("#ivLargeImage");b.css("visibility","hidden");b.empty();q.animateStageIn(b);b.append(a);F()}function H(b){k.find("#ivLargeImage").css("display","none");k.find("#ivLargeImage").css("display","block");var c;"hero-image"===b?e.isDefined(L)&&(c=A(L[l.index])):e.isDefined(u)&&(c=A(u[l.index]));if(e.isDefined(c)){k.find(".fullscreen").remove();var d=a("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),
f=k.find("#ivLargeImage");q.animateStageOut(f,function(){d.load(function(){G(d)});if(d[0].complete)G(d);else{f.empty();var b=(f.height()-104)/2,c=(f.width()-80)/2;a("\x3cimg\x3e").attr("src",h.staticImages.spinner).css({position:"relative",top:b+"px",left:c+"px"}).appendTo(f)}})}}function x(a){k.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?l.type="hero-image":l.type="image";l.index=a.attr("id").split("_")[1];H(l.type);w.postCountMetric("dpcc_iv_thumbCLick_"+
(parseInt(l.index,10)+1)+"_"+(b+f))}function J(){k.delegate(".ivThumb","click",function(){var b=a(this);x(b)})}function O(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function N(a){var b=Q.top-(a.pageY-T[1])*Z;a=O(Q.left-(a.pageX-T[0])*Z,S.left);b=O(b,S.top);k.find(".fullscreen").css({left:a,top:b})}function c(){k.delegate("#ivLargeImage","click",function(a){if(z)F();else if(K){k.find(".fullscreen").removeAttr("style");if(K){var b=k.find("#ivLargeImage"),c=b.find(".fullscreen");r?b.css("cursor",
"url('"+h.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));z=!0;var d=k.find("#ivLargeImage");S.left=d.width()-c.width();S.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;T=[b.offset().left+e,b.offset().top+d];Q.top=d-c.height()/2;Q.left=e-c.width()/2;c.css({position:"relative",left:Q.left,top:Q.top});Z=Math.max(c.height()/b.height(),c.width()/b.width())}N(a);w.postCountMetric("dpcc_iv_largeImageCLick")}});
k.delegate("#ivLargeImage","mousemove",function(a){z&&N(a)})}function B(){k.find("#ivLargeImage").empty()}function t(c){if(E){k=a("#ivMain");m();l=y.getCurrentItem();d();q.populateVariationSelection(k.find("#ivVariationSelection"));c=k.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var g=b+f,h=0,n=0;h<g;)for(var p=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),r=0;4>r&&h<g;r++,h++,n++)if(n<b){var t=L[h].thumb,B=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+h).appendTo(p);B.find(".ivThumbImage").css("background",'url("'+q.getResizedThumbnailURL(t)+'") center no-repeat')}else n>=b&&n<f+b&&(t=u[h-b].thumb,B=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(h-b)).appendTo(p),B.find(".ivThumbImage").css("background",'url("'+q.getResizedThumbnailURL(t)+'") center no-repeat'));V();E=!1}else d();c=a("#ivImagesTab").height();k.css("height",c);g=k.find("#ivTitle").outerHeight(!0);h=k.find("#ivVariationSelection").outerHeight(!0);
n=k.find("#ivThumbs");p=q.getDimension(n,"margin-top")+q.getDimension(n,"margin-bottom");n.css("height",c-g-h-p);k.find("#ivLargeImage").css("height",c);c=k.find("#ivStage");g=k[0]&&k[0].getBoundingClientRect&&Math.floor(k[0].getBoundingClientRect().width)||k.width();c.css("width",g-q.getDimension(k,"padding-left")-q.getDimension(k,"padding-right")-k.find("#ivThumbColumn").width()-q.getDimension(c,"margin-left")-q.getDimension(c,"margin-right"));l=y.getCurrentItem();c="hero-image"===l.type?k.find("#ivHeroImage_"+
l.index):"image"===l.type?k.find("#ivImage_"+l.index):e.isDefined(L)?k.find("#ivHeroImage_"+l.index):k.find("#ivImage_"+l.index);e.isjQueryObjDefined(c)||(c=k.find("#ivImage_0"));x(c)}var M,h,y,k,L,u,b,f,l,r=navigator.userAgent.match(/msie|trident/i),E=!0,z=!1,K=!1,S={},Q={},Z,T,E=!0,V=g.once(function(){J();c();q.attachImmersiveViewResizeHandler(t);q.attachTabDeselectHandler("ivImagesTab",B)});return function(c,d,e,g){M=this;h=c;y=d;M.render=function(c,d,e,g,h,l){E=!0;m();0===b+f?q.hideTabHeading("ivImagesTabHeading"):
q.unhideTabHeading("ivImagesTabHeading");1===b+f?a("#ivThumbs").hide():a("#ivThumbs").show()};M.update=function(a){};q.attachTabSelectHandler("ivImagesTab",t)}});"use strict";E.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(g,n,p,a,e,C,w,q,d,m){function E(){h.delegate(".ivThumb","click",function(){var b=a(this);h.find(".ivThumb").removeClass("selected");
b.addClass("selected");b.hasClass("ivThumbVideo")&&(y.type="chromeful-video",y.index=b.attr("id").split("_")[1])})}function F(){var b=a("#ivVideosTab").height();h.css("height",b);var c=h.find(".vse-video-block");L=b-q.getDimension(h,"padding-top")-q.getDimension(h,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(la)h.css({"max-width":Math.floor(1.77*L)});else{var b=h.find(".vse-airy-container"),c=h.find(".vse-ib-metadata"),d=Math.floor(L-q.getDimension(c,"height")),e=Math.floor(1.77*
d);b.css({"max-height":d,"max-width":e});c.css("max-width",e);z&&(b=h.find(".vse-vertical-scroll"),c=q.getDimension(b,"margin-top")+q.getDimension(b,"margin-bottom"),b.css("max-height",L-c))}}function G(){H();k&&k.pause();K=!1;l=!0;f=null}function H(){K=!1;k&&k.pause()}function x(b){f=b.clickTimeStamp;r&&(m.get(g,"#ivVideoBlock",M,T,V),h=a("#ivVideoBlock"),t.getCurrentItem(),y=t.getCurrentItem(),S());F();K=!0;r=!1;N()}function J(b){r&&(h=a("#ivVideoBlock"),t.getCurrentItem(),y=t.getCurrentItem(),
S());K&&N();F()}function O(a){k=a.airy;K&&k.play({isAsync:!0})}function N(){if(k&&(k.play({isAsync:!0,eventTimestamp:f||(new Date).getTime()}),w.postCountMetric("dpcc_vse_videoBlock_video_played"),l)){var a=A.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,w.postTimeMetric("dpcc_vse_vitff",a),l=!1)}}var c,B,t,M,h,y,k,L,u,b,f,l=!0,r=!0,la=!1,z=!1,K=!1,S=g.once(function(){E();q.attachImmersiveViewResizeHandler(J);q.attachTabDeselectHandler("ivVideosTab",H);q.attachImmersiveViewResetHandler(G)}),
Q=function(b,c,d){a("#ivVideoBlockSpinner").addClass("aok-hidden");w.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+c.placement);b=t.getCurrentItem().color;b=e.getVideoHash(b,0,B);k||(k=e.createAiryInstanceForChromeful(a("#ivVideoBlock"),b,B.airyConfig,"ImmersiveView"));la=!0;a("#ivVideoBlock").css({"max-width":1.77*L,margin:"0 auto"});K&&la&&k.play({isAsync:!0})},Z=function(b,c,d){r||m.get(b,"#ivVideoBlock",M,T,V);a("#ivVideoBlockSpinner").addClass("aok-hidden")},T=function(a,b,c){z=!0;F();
K&&N()},V=function(a,b,c){w.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,f,h,l){c=this;B=a;t=f;c.render=function(a,c,f,h,l,k){a=t.getCurrentItem().color;c=e.getVideoHash(a,0,B);u=B.colorToAsin[a]&&B.colorToAsin[a].asin;u=e.isDefined(u)?u:B.mediaAsin;b=null!==B.vseVideoDataSourceTreatment&&"T1"===B.vseVideoDataSourceTreatment?"ASIN":"physicalID";r=!0;-1===c?q.hideTabHeading("ivVideosTabHeading"):(q.unhideTabHeading("ivVideosTabHeading"),
M={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:u,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:b,videoURL:c.url,imageURL:c.slateUrl},requestId:B.dpRequestId,metadata:{ProductTitle:B.title}},d.get(g,"#ivVideoBlock",M,Z,Q))};c.update=function(a){};q.attachTabSelectHandler("ivVideosTab",x);g.on("vseAiry",O)}});"use strict";E.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader",
"nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(g,n,p,a,e,C,w,q,d){function m(){var b=a("#iv360Tab").height();z.css("height",b);var c=z.find("#ivTitle360").outerHeight(!0),e=z.find("#ivVariationSelection360").outerHeight(!0),f=z.find("#ivThumbs360"),g=d.getDimension(f,"margin-top")+d.getDimension(f,"margin-bottom");f.css("height",b-c-e-g);b=z.find("#ivStage360");c=z[0]&&z[0].getBoundingClientRect&&Math.floor(z[0].getBoundingClientRect().width)||
z.width();b.css("width",c-d.getDimension(z,"padding-left")-d.getDimension(z,"padding-right")-z.find("#ivThumbColumn360").width()-d.getDimension(b,"margin-left")-d.getDimension(b,"margin-right"))}function A(){x();var a=z.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});d.animateStageIn(a)},200);F()}function F(){if(0<R){var a=z.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function G(b,c){if(R<b.length){var d=a("\x3cimg /\x3e").css({display:"block",
width:6*S+"px",height:Q+"px"});d.hide();c.append(d);d.get(0).onload=function(){c.closest(document.documentElement).length&&(R++,1===R&&(F(),0<ma&&(w.time("dppc_loadTime360",Date.now()-ma,r.mediaAsin),q.postTimeMetric("dppc_loadTime360",Date.now()-ma))),0<W&&(w.time("dppc_perSpriteloadTime360",Date.now()-W,r.mediaAsin),q.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-W)),z.find("#iv360Spinner").hide(),d.show(),fa=5*K.imageLocations[Math.floor(aa/K.imageLocations[0].length)][aa%K.imageLocations[0].length],
G(b,c))};d.attr("src",b[R].replace(/(\._SP)\d+(,)\d+/,"$1"+T+"$2"+Z));W=Date.now()}}function E(a){if(e.isDefined(K.spriteWidthSizes)&&0<K.spriteWidthSizes.length){var b=K.spriteWidthSizes,c=b.length,d=b[0],f=b[c-1];if(a<=d)return d;if(a>f)return f;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function x(){var b=z.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),
height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",r.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),ia=!0,J())}function J(){if(e.isDefined(K.spriteURLs)&&e.isDefined(z)&&ia&&!ha){var b=z.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(K.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",K.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(r.staticStrings.dragToSpin).appendTo(d);d.appendTo(b);var d=K.imageWidth,f=K.imageHeight,g=b.parent().width(),h=b.parent().height(),l=0,k=0;d/f>g/h?(T=E(g),Z=Math.round(f/d*T),S=Math.ceil(g),Q=Math.ceil(Z/T*g),k=(h-Q)/2):(Z=E(h),T=Math.round(d/
f*Z),Q=Math.ceil(h),S=Math.ceil(T/Z*h),l=(g-S)/2);b.css({"margin-left":l,"margin-top":k,width:S+"px",height:Q+"px",overflow:"hidden",position:"relative"});b.children("#image-360-sprites").css("width",6*S+"px");G(K.spriteURLs,z.find("#image-360-sprites"),0);d=z.find("#ivLarge360");d.bind("mousedown",B);d.bind("touchstart",O);d.bind("touchmove",N);d.bind("touchend",c);a(document).bind("mousemove",t);a(document).bind("mouseup",M);e.isDefined(r.staticImages.grab)&&b.css("cursor","url('"+r.staticImages.grab+
"'), auto");ha=!0}}function O(a){D=!0;ga=a.originalEvent.targetTouches[0].clientX}function N(a){D&&(h(a.originalEvent.targetTouches[0].clientX-ga),ga=a.originalEvent.targetTouches[0].clientX)}function c(a){D&&(D=!1)}function B(a){ea=!0;V=a.originalEvent.clientX;e.isDefined(r.staticImages.grabbing)&&(a=z.find("#ivLarge360"),a.css("cursor","url('"+r.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+r.staticImages.grabbing+"'), auto"));return!1}function t(a){ea&&
(h(a.originalEvent.clientX-V),V=a.originalEvent.clientX)}function M(a){ea&&(ea=!1,e.isDefined(r.staticImages.grab)&&(a=z.find("#ivLarge360"),a.css("cursor","url('"+r.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function h(a){fa-=a/S*180;ja&&(w.count("dppc_360dragToSpin",r.mediaAsin),q.postCountMetric("dppc_360dragToSpin"));ja=!1;for(a=fa;0>a;)a+=360;for(;360<a;)a-=360;fa=a;var b;a=360;for(var c=0;c<R;c++)for(var d=0;d<K.imageLocations[c].length;d++){var f=
Math.abs(fa-5*K.imageLocations[c][d]);f<a&&(a=f,b=c*K.imageLocations[0].length+d)}b!==aa&&(a=Math.floor(b/K.imageLocations[0].length),a!==Math.floor(aa/K.imageLocations[0].length)&&(e.isDefined(ba)||(ba=document.createElement("canvas").getContext("2d")),c=z.find("#image-360-sprites").children(),ba.drawImage(c[a],0,0)),a=z.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));aa=b;a=b%K.imageLocations[0].length*-1*S;b=-1*Math.floor(b/K.imageLocations[0].length)*
Q;c=z.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function y(){if(da){z=a("#ivMain360");var c=la.getCurrentItem().color;u()&&b(c);K=u()?r.spin360ColorData[c]:void 0;d.populateTitle(z.find("#ivTitle360"),160,r);d.populateVariationSelection(z.find("#ivVariationSelection360"));z.find("#ivLarge360").empty();R=0;ha=ia=!1;aa=fa=0;na();da=!1}0!==a("#iv360Tab").height()&&(d.detachImmersiveViewResizeHandler(y),
m(),A(),ma=Date.now(),v=ja=!0,w.count("dppc_click360",r.mediaAsin),q.postCountMetric("dppc_click360"))}function k(b,c,f){var g=r.colorToAsin[f],h={},l=500;if(!g||!g.asin)if(f===r.defaultColor)g={asin:r.winningAsin};else return;h.params={asin:g.asin};var k="360"+g.asin,m=Date.now();h.success=function(g){w.time("dppc_asyncRequestTime360",Date.now()-m,r.mediaAsin);q.postTimeMetric("dppc_asyncRequestTime360",Date.now()-m);if(g&&e.isDefined(g.spin360)){if(g=g.spin360.spin360Model)r.spin360ColorData[f]=
g,f===la.getCurrentItem().color&&(K=r.spin360ColorData[f],J(),a("#ivThumbs360").hide(),d.unhideTabHeading("iv360TabHeading"),L(b,c,f));e.ajaxState(k,"success")}else h.error()};h.error=function(){w.count("dppc_asyncFailedTransient360",r.mediaAsin);q.postCountMetric("dppc_asyncFailedTransient360");w.time("dppc_asyncRequestTime360",Date.now()-m,r.mediaAsin);q.postTimeMetric("dppc_asyncRequestTime360",Date.now()-m);l*=2;16E3>=l?setTimeout(function(){m=Date.now();C.load("/gp/product/features/apparel-main-image/360.html",
h)},l):(w.count("dppc_asyncFailed360",r.mediaAsin),q.postCountMetric("dppc_asyncFailed360"),e.ajaxState(k,"fail"))};e.ajaxState(k)&&"fail"!==e.ajaxState(k)||(C.load("/gp/product/features/apparel-main-image/360.html",h),e.ajaxState(k,"sent"))}function L(a,c,d){if(e.isImmersiveViewEnabled(r,la.getCurrentItem().color)&&u()&&b(d)){if(c===r.maxAlts){d=a.find(".item.imageThumbnail");var f=a.find(".item.videoThumbnail");e.isDefined(f)&&1<f.length?f.last().remove():d.last().remove();c--}d=a.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item");
g.declarative.create(d,"button-360-click");a.append(d);c++;w.count("dppc_display360",r.mediaAsin);q.postCountMetric("dppc_display360")}return c}function u(){return r&&e.isDefined(r.spin360ConfigEnabled)&&r.spin360ConfigEnabled}function b(a){return e.isDefinedAndNotEmpty(r.spin360ColorData[a])?!0:e.isDefined(r.spin360LazyLoadEnabled)&&r.spin360LazyLoadEnabled}function f(){v&&(w.time("dppc_duration360",Date.now()-ma,r.mediaAsin),q.postTimeMetric("dppc_duration360",Date.now()-ma),v=!1)}var l,r,la,z,
K,S,Q,Z,T,V,ga,ia=!1,ha=!1,fa=0,aa=0,ma=0,W=0,ea=!1,D=!1,R=0,ba,ja=!0,v=!1,da=!0,na=g.once(function(){d.attachImmersiveViewResizeHandler(y);d.attachImmersiveViewResizeHandler(m);d.attachImmersiveViewResetHandler(f);d.attachTabDeselectHandler("iv360Tab",f)});return function(c,f,g,h){l=this;r=c;la=f;c=r.landingAsinColor;f=r.defaultColor;e.isDefined(r.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",d.addStyleCodeToURL(r.staticImages.icon360,"_FMpng_RI_"));
u()&&(r.spin360ColorData||(r.spin360ColorData={}),c===f&&e.isDefinedAndEmpty(r.spin360ColorData[f])&&delete r.spin360ColorData[f]);l.render=function(c,f,g,h,l,m){da=!0;u()&&b(c)?(g=r.spin360ColorData[c],e.isDefinedAndEmpty(g)?d.hideTabHeading("iv360TabHeading"):e.isDefinedAndNotEmpty(g)?(a("#ivThumbs360").hide(),d.unhideTabHeading("iv360TabHeading"),L(h,f,c)):(r.spin360ColorData[c]={},d.hideTabHeading("iv360TabHeading"),k(h,f,c))):d.hideTabHeading("iv360TabHeading")};l.update=function(a){};d.attachTabSelectHandler("iv360Tab",
y)}});E.register("nexusLogger360",function(){return{count:function(g,n){A.ue&&A.ue.event({asin:n,metricName:g,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(g,n,p){A.ue&&A.ue.event({asin:p,metricName:g,metricValue:n},"hit-360","hit360.clientEvent.3")}}});"use strict";E.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(g,n){try{var p=A.location.host,a={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},e=p.split(".")[1],
C=-1===p.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==a[e]?a[e]:"https://www.amazon.com/vap/ew/",w="vse_lazyLoaderHook:success:",q="vse_lazyLoaderHook:error:",d="vse_preLoaderHook:success:",m="vse_preLoaderHook:error:",I="vse_lightPlayerLoaderHook:success:",F="vse_lightPlayerLoaderHook:error:",G=4E3,H=3}catch(x){n.logError("FATAL","vse_ns_desktop","[Domain] ",x)}E.register("vse_ns_preLoaderHook",function(){function a(e,p){try{var c=e.A,q=e.block,t=e.request,w=e.handleFailure,h=e.handleSuccess,
y=c.$;p--;var k=H-p-1,x=c.now();c.ajax(C+"componentbuilder",{params:t,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:t.timeout||G,withCredentials:!0,success:function(a){var e=c.now()-x;g.postTimeMetric(d,e);g.postCountMetric(d+t.page+":"+t.placement+":"+k);y(q).html(a);h(c,t,a)},error:function(b){g.postCountMetric(m+t.page+":"+t.placement+":"+k);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<p?a(e,p):(g.postCountMetric(m,1),w(c,t,b))}})}catch(u){n.logError("FATAL",
"vse_ns_desktop","[vse_ns_preLoaderHook] ",u)}}return{get:function(d,e,c,g,m){a({A:d,block:e,request:c,handleFailure:m,handleSuccess:g},H)}}});E.register("vse_ns_lazyLoaderHook",function(){function a(d,e,c){try{var m=d.A,p=d.context,x=d.handleFailure,h=d.handleSuccess;e.attr("data-configuration");var y=atob(e.attr("data-configuration")),k=JSON.parse(y),A={pageContext:p,configuration:k},u=m.now();c--;var b=H-c-1;m.ajax(C+"subcomponent/"+k.type,{params:A,paramsFormat:"json",method:"post",contentType:"application/json",
timeout:p.timeout||G,withCredentials:!0,success:function(a){var c=m.now()-u;g.postTimeMetric(w,c);g.postCountMetric(w+p.page+":"+p.placement+":"+k.type+":"+b);e.html(a);h(m,A,a)},error:function(f){g.postCountMetric(q+p.page+":"+p.placement+":"+k.type+":"+b);(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<c?a(d,e,c):(g.postCountMetric(q,1),x(m,A,f))}})}catch(f){n.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",f)}}return{get:function(d,e,c,g,m){var n=d.$;n(e+" div[data-configuration]").each(function(){a({A:d,
context:c,handleFailure:m,handleSuccess:g},n(this),H)})}}});E.register("vse_ns_videoPlayer",function(){function a(d,e,c){try{var m=d.A,p=d.block,q=d.request,h=d.handleFailure,w=d.handleSuccess,k=m.$;c--;var x=H-c-1,u=m.now();m.ajax(C+"subcomponent/lightvideoplayer",{params:q,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:q.timeout||G,withCredentials:!0,success:function(a){var b=m.now()-u;g.postTimeMetric(I,b);g.postCountMetric(I+q.page+":"+q.placement+":"+
x);k(p).html(a);w(m,q,a)},error:function(b){g.postCountMetric(F+q.page+":"+q.placement+":"+x);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<c?a(d,c):(g.postCountMetric(F,1),h(m,q,b))}})}catch(b){n.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",b)}}return{get:function(d,e,c,g,m){a({A:d,block:e,request:c,handleFailure:m,handleSuccess:g},H)}}})})});